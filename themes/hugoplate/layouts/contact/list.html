{{ define "main" }}

  {{ partial "page-header" . }}

  <!-- Incluir jQuery (solo si aún no lo has incluido en tu layout) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Script de validación de Mailchimp (necesario para mostrar mensajes de error/success) -->
  <script src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js" type="text/javascript"></script>
  <script type="text/javascript">
    (function($) {
      window.fnames = new Array();
      window.ftypes = new Array();
      fnames[0] = 'EMAIL'; ftypes[0] = 'email';
      fnames[1] = 'FNAME'; ftypes[1] = 'text';
      fnames[7] = 'MMERGE7'; ftypes[7] = 'text';
    })(jQuery);
    var $mcj = jQuery.noConflict(true);
  </script>


  <section class="section-sm">
    <div class="container">
      <div class="row">
        <div class="md:col-10 lg:col-6 mx-auto">

          {{ with site.Params.subscription }}
            {{ if .enable }}

              <!-- Ajuste #1: gradiente más evidente y menos margen vertical (my-2 en lugar de my-6) -->
              <div 
                id="mc_embed_shell" 
                class="bg-gradient-to-r from-blue-200 to-blue-50 p-6 rounded-md shadow-md max-w-lg mx-auto my-2"
              >
                <div id="mc_embed_signup">

                  <!-- Título del formulario -->
                  <h2 class="text-2xl font-bold mb-4 text-gray-900">
                    Agenda con un Experto
                  </h2>

                  <!-- Descripción o instrucción breve -->
                  <p class="text-sm mb-4 text-gray-700">
                    <span class="text-red-500 font-bold">*</span> Obligatorio
                  </p>

                  <!-- Formulario principal de Mailchimp -->
                  <form 
                    action="{{ .mailchimp_form_action | safeURL }}" 
                    method="post" 
                    id="{{ .mailchimp_form_name }}" 
                    name="{{ .mailchimp_form_name }}" 
                    class="validate space-y-4" 
                    target="_self" 
                    novalidate
                  >
                    <div id="mc_embed_signup_scroll">

                      <!-- Campo Email -->
                      <div class="mc-field-group">
                        <label for="mce-EMAIL" class="block mb-1 font-semibold text-gray-800">
                          Correo electrónico 
                          <span class="text-red-500 font-bold">*</span>
                        </label>
                        <input 
                          type="email" 
                          name="EMAIL" 
                          class="required email w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500" 
                          id="mce-EMAIL" 
                          required 
                          placeholder="ejemplo@correo.com"
                        >
                      </div>

                      <!-- Campo Nombre -->
                      <div class="mc-field-group">
                        <label for="mce-FNAME" class="block mb-1 font-semibold text-gray-800">
                          Nombre
                        </label>
                        <input 
                          type="text" 
                          name="FNAME" 
                          class="text w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500" 
                          id="mce-FNAME"
                          placeholder="Nombre"
                        >
                      </div>

                      <!-- Campo Mensaje (Textarea) -->
                      <div class="mc-field-group">
                        <label for="mce-MMERGE7" class="block mb-1 font-semibold text-gray-800">
                          Mensaje
                        </label>
                        <textarea
                          name="MMERGE7"
                          id="mce-MMERGE7"
                          class="text w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500"
                          rows="4"
                          placeholder="¿En qué podemos servir?"
                        ></textarea>
                      </div>

                      <!-- Campo oculto para etiquetas (opcional) -->
                      <div hidden>
                        <input type="hidden" name="tags" value="4910217,4910218,4910219">
                      </div>

                      <!-- Mensajes de error / éxito -->
                      <div id="mce-responses" class="clear foot hidden">
                        <div class="response text-red-500" id="mce-error-response" style="display:none"></div>
                        <div class="response text-green-500" id="mce-success-response" style="display:none"></div>
                      </div>

                      <!-- Campo oculto anti-bot -->
                      <div aria-hidden="true" style="position: absolute; left: -5000px;">
                        <input type="text" name="b_c94c8f342aaef2f35a35d45d9_dc9cb70629" tabindex="-1" value="">
                      </div>

                      <!-- Botón de envío -->
                      <div class="optionalParent">
                        <div class="clear foot">
                          <input 
                            type="submit" 
                            name="subscribe" 
                            id="mc-embedded-subscribe" 
                            class="button bg-blue-600 text-white px-6 py-2 rounded-md font-bold hover:bg-blue-700 transition-colors cursor-pointer"
                            value="Enviar"
                          >

                          <!-- Ajuste #2: insignia Mailchimp a la derecha, más pequeña y menos visible -->
                          <p class="mt-2 text-right">
                            <a 
                              href="http://eepurl.com/jaywVI" 
                              title="Mailchimp - email marketing made easy and fun" 
                              class="inline-flex items-center space-x-2"
                              style="width: 80px; opacity: 0.2;"
                            >
                              <img 
                                class="refferal_badge" 
                                src="https://digitalasset.intuit.com/render/content/dam/intuit/mc-fe/en_us/images/intuit-mc-rewards-text-dark.svg" 
                                alt="Intuit Mailchimp" 
                                style="width: 80px; height: auto;"
                              >
                            </a>
                          </p>

                        </div>
                      </div>

                    </div> <!-- /#mc_embed_signup_scroll -->
                  </form>
                </div> <!-- /#mc_embed_signup -->
              </div> <!-- /#mc_embed_shell -->

            {{ end }}
          {{ end }}

        </div>
      </div>
    </div>
  </section>

  <!-- Sección Google Map (opcional, si tu proyecto lo usa) -->
  {{ with site.Params.google_map }}
    {{ if .enable }}
      <div
        id="map"
        style="height: 400px;"
        data-latitude="{{ .map_latitude }}"
        data-longitude="{{ .map_longitude }}"
        data-marker="{{ .map_marker | relURL }}"
        data-marker-name="{{ site.Title }}"
      >
      </div>
    {{ end }}
  {{ end }}

  {{ if site.Params.google_map.enable }}
    {{ $gmap := resources.Get "plugins/maps/google-map.js" }}
    <script defer src="{{ $gmap.RelPermalink }}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ site.Params.google_map.map_api_key }}&libraries=places"></script>
  {{ end }}




 

    
{{ end }}
